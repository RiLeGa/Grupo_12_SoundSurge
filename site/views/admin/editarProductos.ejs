<!DOCTYPE html>
<html lang="en">
    <%- include ("../partials/head",{title: "Editar Producto"}) %>
<body class="crear">
    <%- include ("../partials/header") %> 
    <main>
        <h2>Modificar Producto</h2>
        <a class="direct-lista" href="../lista">
            <button type="submit" class="btn btn-primary">Lista de productos</button>
        </a>
        <section>
            <form action="/admin/editar/<%= producto.id %>?_method=put" method="post"  enctype="multipart/form-data">
                <div class="mb-3">
                    <label for="marcas" class="form-label">MARCAS</label>
                <select class="form-select" name="marcas" id="marcas" aria-label="select example">
                       
                    <option selected hidden value="">Selecciona una opcion</option>
                                    <% marcas.forEach(marca => { %>
                                        <option value="<%= marca.id %>" <%= producto.marcasId === marca.id ? "selected" : null %>><%= marca.nombre %></option>
                                    <% }) %>
                </select>
                <p class="error" id="marcaError">
                    <%= locals.errors && errors.marcas ? errors.marcas.msg : null %>
                </p>
            </div> 
                <div class="mb-3">
                    <label for="formGroupExampleInput2" class="form-label">Titulo</label>
                    <input type="text" class="form-control" name="titulo" id="titulo" placeholder="Ingrese marca del producto" value="<%= producto.titulo %> ">
                    <p class="error" id="tituloError">
                        <%= locals.errors && errors.titulo ? errors.titulo.msg : null %>
                    </p>
                </div>   
                <div class="mb-3">
                    <label for="formGroupExampleInput2" class="form-label">Precio</label>
                    <input type="text" class="form-control" name="precio" id="precio" placeholder="Ingrese precio del producto" value="<%= producto.precio %>">
                    <p class="error" id="precioError">
                        <%= locals.errors && errors.precio ? errors.precio.msg : null %>
                    </p>
                </div>   
                <div class="mb-3">
                    <label for="formGroupExampleInput2" class="form-label">Descuento</label>
                    <input type="text" class="form-control" name="descuento" id="descuento" placeholder="Ingrese su descuento" value="<%= producto.descuento %>">
                    <p class="error" id="descuentoError">
                        <%= locals.errors && errors.descuento ? errors.descuento.msg : null %>
                    </p>
                </div>   
                <div class="mb-3">
                    <label for="formGroupExampleInput2" class="form-label">Descripcion</label>
                    <input type="text" class="form-control" name="descripcion" id="descripcion" placeholder="Ingrese descripcion" value="<%= producto.descripcion %>">
                    <p class="error" id="descripcionError">
                        <%= locals.errors && errors.descripcion ? errors.descripcion.msg : null %>
                    </p>
                </div>   
                <div class="mb-3">
                    <label for="formGroupExampleInput2" class="form-label">Stock</label>
                    <input type="text" class="form-control" name="stock" id="stock" placeholder="Stock disponible" value="<%= producto.stock %>">
                    <p class="error" id="stockError">
                        <%= locals.errors && errors.stock ? errors.stock.msg : null %>
                    </p>
                </div>
                </div>
                <div class="mb-3">
                    <label for="categorias" class="form-label">CATEGORIAS</label>
                    <select class="form-select" name="categorias" id="categorias" aria-label="select example">
                        
                        <option selected hidden value="">Selecciona una opcion</option>
                                        <% categorias.forEach(categoria => { %>
                                            <option value="<%= categoria.id %>" <%= producto.categoriasId === categoria.id ? "selected" : null %>><%= categoria.nombre %></option>
                                        <% }) %>
                    </select>
                    <p class="error" id="categoriaError">
                        <%= locals.errors && errors.categorias ? errors.categorias.msg : null %>
                    </p>
                </div>  
                </div>
                <div class="imagenes-sec">
                    <% producto.imagenes.forEach(img => { %>
                        <img class="secundarias" src="/images/<%= img.nombre %>" alt="Imagen secundaria" onclick="document.getElementById('imgMain').setAttribute('src','/images/<%= img.nombre %>')">
                    <% }) %>
                    
                </div>
                <div class="mb-3">
                
                <label  class="form-label">Imagen 1</label>
                <input type="file" class="form-control"  name="imagen1" placeholder="Introduzca la imagen del producto"   >
                <label  class="form-label">Imagen 2</label>
                <input type="file" class="form-control"  name="imagen2" placeholder="Introduzca la imagen del producto"   >
                <label  class="form-label">Imagen 3</label>
                <input type="file" class="form-control"  name="imagen3" placeholder="Introduzca la imagen del producto"   >
                <label  class="form-label">Imagen 4</label>
                <input type="file" class="form-control"  name="imagen4" placeholder="Introduzca la imagen del producto"   >
                
                <p class="error" id="imagen">
                    <%= locals.errors && errors.imagen ? errors.imagen.msg : null %>
                </p>
                </div>
                <div class="botones">
                <button class="btn btn-primary" id='#btn-submit' type="submit">Confirma</button>
                <button class="btn btn-secundary" ><a  href="/admin/lista">Cancelar</a></button>
                </div>
            </form>
        </section>
    </main>    
    <script src="/javascripts/validacionProductos.js"></script>  
</body>
</html>